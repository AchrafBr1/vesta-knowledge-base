name: Translate

on:
  issue_comment:
    types: [created]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Node.js
        uses: actions/setup-node@v1
        with:
          node-version: 12.x


      - name: Loop over references
        run: |
          references=$(echo "${{ github.event.comment.body }}" | grep -o 'vesta-[0-9]*')
          for ref in $references; do
            echo "Processing reference: $ref"

            # Add translation steps for each language
            - name: "A単adiendo $ref - Espa単ol"
              uses: AchrafBr1/translate-readme@main
              with:
                LANG: es
                MODEL: $ref

            - name: "A単adiendo $ref - Frances"
              uses: AchrafBr1/translate-readme@main
              with:
                LANG: fr
                MODEL: $ref

            - name: "A単adiendo $ref - Italiano"
              uses: AchrafBr1/translate-readme@main
              with:
                LANG: it
                MODEL: $ref
          done
